<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Your Name">
<meta name="dcterms.date" content="2023-04-28">

<title>Stat 151 - Homework 11: Working with Joins</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Stat 151</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://srvanderplas.github.io/stat-computing-r-python/">
 <span class="menu-text">Textbook</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.pdf">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Homework 11: SQL Island</h1>
  <div class="quarto-categories">
    <div class="quarto-category">hw</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Your Name </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 28, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Note: This assignment must be submitted in github classroom.</p>
<p>Note: This is almost a direct transcript of a game available at https://sql-island.informatik.uni-kl.de/.</p>
<p>If you would like to complete this game using SQL statements instead of R/Python commands, you may do so. Instead of providing a link to your repository on Canvas, provide instead a link to your certificate of completion. It will look like this: &gt; https://sql-island.informatik.uni-kl.de/cert.php?id=19149d34bb</p>
<p>Be sure to use your full name on the certificate.</p>
<hr>
<p>You’ve been stranded on SQL Island!</p>
<p>Use the tables in this repository to answer the following questions and/or complete the following tasks (use R or Python):</p>
<ol type="1">
<li>See what villages are on the island</li>
</ol>
<div class="cell">

</div>
<ol start="2" type="1">
<li>See what people are on the island</li>
</ol>
<div class="cell">

</div>
<ol start="3" type="1">
<li>You’re hungry. Can you find a butcher to get some sausages?<br>
Use a query/filter statement to get a data frame of all of the butchers on the island.</li>
</ol>
<div class="cell">

</div>
<ol start="4" type="1">
<li>You talk to Edward Grasshead, who gives you some sausages. He also warns you that not all people on the island are friendly. He suggests that as long as you are unarmed, you should stay away from villains.<br>
Use a query/filter statement to get a data frame of all of the friendly people on the island.</li>
</ol>
<div class="cell">

</div>
<ol start="5" type="1">
<li>You decide to find a sword. Is there a friendly weaponsmith that could forge one?<br>
Use a query/filter statement to get a data frame of all of the friendly weaponsmiths on the island.</li>
</ol>
<div class="cell">

</div>
<ol start="6" type="1">
<li>The options aren’t great. Can you find other friendly smiths to help you out?<br>
Use a query/filter statement that tests for a partial match on “smith” - that will include weaponsmiths, but also smiths, blacksmiths, and so on.<br>
<strong>Hint:</strong> Use <code>stringr::str_detect(x, pattern)</code> in R or <code>x.str.contains(pattern)</code> in Python. ::: {.cell}</li>
</ol>
<p>:::</p>
<ol start="7" type="1">
<li>Paul, the mayor of Monkeycity, stops you and offers to register you as a citizen. He has named you “Stranger”. Can you use a filter/query statement to figure out what your personid is?</li>
</ol>
<div class="cell">

</div>
<ol start="8" type="1">
<li>You go to talk to Ernest Perry, the weaponsmith, and ask how much a sword costs. He offers to make you a sword for 150 gold.<br>
How much gold do you have? Write a query/filter statement using your personid.</li>
</ol>
<div class="cell">

</div>
<ol start="9" type="1">
<li>Maybe you can collect ownerless items and sell them to earn some money!<br>
Make a list of all items that don’t belong to anyone (owner = “null” if the item is unclaimed).</li>
</ol>
<div class="cell">

</div>
<ol start="10" type="1">
<li>Claim the unclaimed items by updating the owner. Can you do this with a single statement?</li>
</ol>
<div class="cell">

</div>
<ol start="11" type="1">
<li>List all of the items that you currently have using a query/filter statement.</li>
</ol>
<div class="cell">

</div>
<ol start="12" type="1">
<li>Find a friendly inhabitant who is either a dealer or a merchant using a filter/query statement.</li>
</ol>
<div class="cell">

</div>
<ol start="13" type="1">
<li>Helen Grasshead, a dealer, offers to buy the ring and the teapot for 120 gold.<br>
Update the items dataset to indicate that she now owns those two items. Update the inhabitants dataset to indicate that you have 120 additional gold and Helen Grasshead has 120 less gold.</li>
</ol>
<div class="cell">

</div>
<ol start="14" type="1">
<li>You still don’t have enough money for a sword. Update the inhabitants dataset to change your name from Stranger to your real name before you apply for a job.</li>
</ol>
<div class="cell">

</div>
<ol start="15" type="1">
<li>You enjoy baking. Find a list of bakers who you can work for. Order your list by amount of gold (descending) so that the richest baker is on top.</li>
</ol>
<div class="cell">

</div>
<ol start="16" type="1">
<li>You’ve interacted with Paul before. Can you join the table above to the village dataset to see how you know him?</li>
</ol>
<div class="cell">

</div>
<ol start="17" type="1">
<li>Paul Bakerman offers you a job as a baker. You will be paid 1 gold for 100 bread rolls. You make 10,000 bread rolls.<br>
Update the tables to pay yourself the appropriate amount of gold and reduce Paul Bakerman’s gold by the same amound.</li>
</ol>
<div class="cell">

</div>
<ol start="18" type="1">
<li>You go back to Ernest Perry and purchase a sword for 150 gold. Update the relevant tables to ensure that everyone’s gold balance is correct AND add a row to the item table indicating that you now own a sword.</li>
</ol>
<div class="cell">

</div>
<ol start="19" type="1">
<li>Is there a pilot on the island who could help you get home?</li>
</ol>
<div class="cell">

</div>
<ol start="20" type="1">
<li>The pilot is being held captive by Dirty Dieter. Join two tables to figure out where Dirty Dieter lives.</li>
</ol>
<div class="cell">

</div>
<ol start="21" type="1">
<li>What is the mayor of the town where Dirty Dieter lives? Use a join to answer this question.</li>
</ol>
<div class="cell">

</div>
<ol start="22" type="1">
<li>How many inhabitants does the town have? Write code to count them.</li>
</ol>
<div class="cell">

</div>
<ol start="23" type="1">
<li>The mayor tells you that the pilot is held captive by Dirty Dieter in his sister’s house. How many women there are in Onionville?<br>
Use a join to answer this question.</li>
</ol>
<div class="cell">

</div>
<ol start="24" type="1">
<li>What’s the name of the most likely suspect?</li>
</ol>
<div class="cell">

</div>
<ol start="25" type="1">
<li>Dirty Dieter offers to release the pilot if you hand over gold equivalent to the entire property of Cucumbertown. How much gold do you need?</li>
</ol>
<div class="cell">

</div>
<ol start="26" type="1">
<li>If you continue working and selling items, you could earn more gold than the worth of gold inventories of all bakers, dealers, and merchants. How much gold is that? Is it enough?</li>
</ol>
<div class="cell">

</div>
<ol start="27" type="1">
<li>Can you determine how much money people have based on their jobs? Who is the best target for additional money?<br>
Hint: Summarize the inhabitants data set by job?</li>
</ol>
<div class="cell">

</div>
<ol start="28" type="1">
<li>How much gold do different inhabitants have based their state (friendly/evil)?</li>
</ol>
<div class="cell">

</div>
<ol start="29" type="1">
<li>You conclude the only way out is to attack Dirty Dieter and Dirty Diane. Remove those rows from the inhabitants dataset.</li>
</ol>
<div class="cell">

</div>
<ol start="30" type="1">
<li>You release the pilot. Update his state in the table.</li>
</ol>
<div class="cell">

</div>
<ol start="31" type="1">
<li>The pilot flies you home. Update your state to “emigrated” in the table.</li>
</ol>
<div class="cell">

</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>